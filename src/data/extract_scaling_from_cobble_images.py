

import numpy as np
import matplotlib.pyplot as plt
import glob
import os
from scipy import signal

# tide 19 (23rd)
# 1252,357933.0300,5022715.2403,4.2620,NTARG1,HRMS:0.005,VRMS:0.005,STATUS:FIXED,SATS:11,PDOP:1.460,HDOP:0.842,VDOP:1.192,TDOP:0.839,GDOP:1.683,DATE:01-01-2010,TIME:05:01:32,RODHGT2:1.471
# 1253,357932.8343,5022713.9053,4.1869,CTARG1,HRMS:0.005,VRMS:0.006,STATUS:FIXED,SATS:11,PDOP:1.462,HDOP:0.843,VDOP:1.195,TDOP:0.841,GDOP:1.687,DATE:01-01-2010,TIME:05:01:50,RODHGT2:1.471
# 1254,357934.2225,5022714.1795,4.2730,STARG1,HRMS:0.006,VRMS:0.006,STATUS:FIXED,SATS:11,PDOP:1.465,HDOP:0.844,VDOP:1.197,TDOP:0.843,GDOP:1.690,DATE:01-01-2010,TIME:05:02:11,RODHGT2:1.471
# 1263,357930.7046,5022711.6730,3.7394,NTARG2,HRMS:0.005,VRMS:0.006,STATUS:FIXED,SATS:11,PDOP:1.617,HDOP:0.800,VDOP:1.405,TDOP:1.261,GDOP:2.051,DATE:01-01-2010,TIME:05:28:52,RODHGT2:1.471
# 1264,357930.5826,5022710.5904,3.5734,CTARG2,HRMS:0.005,VRMS:0.006,STATUS:FIXED,SATS:13,PDOP:1.617,HDOP:0.800,VDOP:1.405,TDOP:1.261,GDOP:2.051,DATE:01-01-2010,TIME:05:29:13,RODHGT2:1.471
# 1265,357931.7242,5022710.8105,3.7184,STARG2,HRMS:0.005,VRMS:0.006,STATUS:FIXED,SATS:13,PDOP:1.617,HDOP:0.800,VDOP:1.405,TDOP:1.261,GDOP:2.051,DATE:01-01-2010,TIME:05:29:30,RODHGT2:1.471
# 1266,357927.9902,5022708.4104,3.1774,NTARG3,HRMS:0.005,VRMS:0.006,STATUS:FIXED,SATS:11,PDOP:1.669,HDOP:0.900,VDOP:1.405,TDOP:1.192,GDOP:2.051,DATE:01-01-2010,TIME:05:40:20,RODHGT2:1.471
# 1267,357928.2278,5022707.4896,3.1164,CTARG3,HRMS:0.005,VRMS:0.006,STATUS:FIXED,SATS:11,PDOP:1.669,HDOP:0.900,VDOP:1.405,TDOP:1.192,GDOP:2.051,DATE:01-01-2010,TIME:05:40:36,RODHGT2:1.471
# 1268,357929.3607,5022707.4440,3.2034,STARG3,HRMS:0.005,VRMS:0.006,STATUS:FIXED,SATS:11,PDOP:1.669,HDOP:0.900,VDOP:1.405,TDOP:1.192,GDOP:2.051,DATE:01-01-2010,TIME:05:40:53,RODHGT2:1.471
# 1273,357924.5323,5022707.1940,2.7924,NTARG4,HRMS:0.005,VRMS:0.006,STATUS:FIXED,SATS:10,PDOP:1.617,HDOP:0.800,VDOP:1.405,TDOP:1.261,GDOP:2.051,DATE:01-01-2010,TIME:06:03:29,RODHGT2:1.471
# 1274,357924.0909,5022705.8421,2.6544,CTARG4,HRMS:0.005,VRMS:0.006,STATUS:FIXED,SATS:10,PDOP:1.725,HDOP:1.000,VDOP:1.405,TDOP:1.109,GDOP:2.051,DATE:01-01-2010,TIME:06:03:49,RODHGT2:1.471
# 1275,357925.6879,5022706.5329,2.8244,STARG4,HRMS:0.005,VRMS:0.006,STATUS:FIXED,SATS:10,PDOP:1.617,HDOP:0.800,VDOP:1.405,TDOP:1.261,GDOP:2.051,DATE:01-01-2010,TIME:06:04:10,RODHGT2:1.471

# homechar = "C:\\"
homechar = os.path.expanduser('~')


tide = "tide19"
position = "position1"
imfile = 'img005100.jpg'
vidspec = "vid_1540304255" # pos4
NTARG = (357933.0300,5022715.2403,4.2620)
CTARG = (357932.8343,5022713.9053,4.1869)
STARG = (357934.2225,5022714.1795,4.2730)

# tide = "tide19"
# position = "position2"
# imfile = 'img011860.jpg'
# vidspec = "vid_1540307860" # pos2
# # east, north, elev
# see NTARG2, etc. above
# NTARG2 = (357930.7046,5022711.6730,3.7394)
# CTARG2 = (357930.5826,5022710.5904,3.5734)
# STARG2 = (357931.7242,5022710.8105,3.7184)

# tide = "tide19"
# position = "position3"
# imfile = 'img000097.jpg'
# vidspec = "vid_1540307860" # pos2

# tide = "tide19"
# position = "position4"
# imfile = 'img005757.jpg'
# vidspec = "vid_1540311466" # pos4

# # east, north, elev
# # see NTARG3, etc. above
# NTARG = (357927.9902,5022708.4104,3.1774)
# CTARG = (357928.2278,5022707.4896,3.1164)
# STARG = (357929.3607,5022707.4440,3.2034)

# see NTARG3, etc. above
# NTARG = (357924.5323,5022707.1940,2.7924)
# CTARG = (357924.0909,5022705.8421,2.6544)
# STARG = (357925.6879,5022706.5329,2.8244)

# straight line distance between points [m]
d1 = np.sqrt(np.abs(NTARG[0] - CTARG[0])**2 + np.abs(NTARG[1] - CTARG[1])**2)
d2 = np.sqrt(np.abs(STARG[0] - CTARG[0])**2 + np.abs(STARG[1] - CTARG[1])**2)
d3 = np.sqrt(np.abs(NTARG[0] - STARG[0])**2 + np.abs(NTARG[1] - STARG[1])**2)

targfile = os.path.join(homechar, 'Projects','AdvocateBeach2018','data','interim','images','fromVideo',tide,position,'targets',imfile)

%matplotlib qt5
im = plt.imread(targfile)
plt.imshow(im)
print("Click on targets, top to bottom.")
x = plt.ginput(3)
print("clicked", x)
plt.show()

# straight line distance between points with cross-shore component [pix]
dpix1 = np.sqrt(np.abs(x[0][0] - x[1][0])**2 + np.abs(x[0][1] - x[1][1])**2)
dpix2 = np.sqrt(np.abs(x[2][0] - x[1][0])**2 + np.abs(x[2][1] - x[1][1])**2)
dpix3 = np.sqrt(np.abs(x[2][0] - x[0][0])**2 + np.abs(x[2][1] - x[0][1])**2)

# pixels/m
scaling1 = dpix1/d1
scaling2 = dpix2/d2
scaling3 = dpix3/d3

mean_scaling = np.mean([scaling1, scaling2, scaling3])
